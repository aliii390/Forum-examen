<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>
			{% block title %}
				Welcome!
			{% endblock %}
		</title>
		{# <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>"> #}
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer"/> {% block stylesheets %}{% endblock %}

{# Inclus Prism.js pour la coloration syntaxique #}
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-php.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>






		{% block javascripts %}
			{% block importmap %}
				{{ importmap('app') }}
			{% endblock %}
		{% endblock %}
	</head>
	<body>
		{# Ajout du menu latéral qui sera caché par défaut #}
	{# Sidebar menu latéral #}
<div id="sidebar" class="fixed top-0 right-0 w-0 h-full bg-white shadow-2xl transition-all duration-300 z-50 overflow-hidden">
    <div class="flex flex-col p-6">
        <div class="flex justify-end mb-6">
            <button id="closeMenu" class="text-gray-800 hover:text-gray-500 transition-colors p-2">
                <i class="fa-solid fa-xmark text-xl"></i>
            </button>
        </div>
        <nav class="flex flex-col gap-5">
            {% if app.user %}
                <a href="{{ path('app_profile') }}" class="text-lg font-medium flex items-center gap-3 hover:text-orange-500 transition-colors border-b border-gray-200 pb-4">
                    <i class="fa-solid fa-user p-2 bg-gray-100 rounded-full"></i>
                    <span>{{ app.user.name }}</span>
                </a>
                <a href="{{ path('app_home') }}" class="text-lg font-medium hover:text-orange-500 transition-colors border-b border-gray-200 pb-4">Accueil</a>
                <a href="{{ path('app_questions') }}" class="text-lg font-medium hover:text-orange-500 transition-colors border-b border-gray-200 pb-4">Poser une question</a>
                <a href="{{ path('app_logout') }}" class="text-lg font-medium hover:text-orange-500 transition-colors border-b border-gray-200 pb-4">Déconnexion</a>
            {% else %}
                <a href="{{ path('app_home') }}" class="text-lg font-medium hover:text-orange-500 transition-colors border-b border-gray-200 pb-4">Accueil</a>
                <a href="{{ path('app_register') }}" class="text-lg font-medium hover:text-orange-500 transition-colors border-b border-gray-200 pb-4">Connexion</a>
            {% endif %}
        </nav>
    </div>
</div>

{# Overlay pour le background du menu mobile #}
<div id="overlay" class="fixed inset-0 bg-black opacity-0 pointer-events-none transition-opacity duration-300 z-40"></div>

{# Header principal #}
<header class="bg-[#FDEDD5] py-3 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
        {# Logo #}
        <a href="{{ path('app_home') }}" class="flex-shrink-0">
            <img src="{{ asset('img/Logo.png') }}" alt="Logo" class="w-28 sm:w-32">
        </a>

        {# Barre de recherche #}
        <div class="flex-1 max-w-md mx-4 hidden sm:block">
            <div class="relative">
                <input 
                    type="text" 
                    name="recherche" 
                    placeholder="Recherchez" 
                    class="bg-[#F5702B] w-full px-4 py-2 text-white text-sm rounded-full placeholder-white focus:outline-none focus:ring-2 focus:ring-orange-400"
                >
                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                    <i class="fa-solid fa-search text-white text-sm"></i>
                </div>
            </div>
        </div>

        {# Navigation desktop #}
        <div class="hidden md:flex md:items-center md:space-x-4">
            {% if app.user %}
                <a href="{{ path('app_profile') }}" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                    <i class="fa-solid fa-user text-gray-800"></i>
                </a>
                <a href="{{ path('app_logout') }}" class="p-2 text-gray-800 hover:text-orange-600 transition-colors">
                    <i class="fa-solid fa-sign-out-alt"></i>
                </a>
                <a href="{{ path('app_questions') }}" class="relative inline-flex items-center justify-center px-6 py-2 overflow-hidden text-white bg-[#F5702B] rounded-full group hover:bg-orange-700 transition-colors">
                    <span class="relative flex items-center gap-2 text-sm font-medium">
                        <i class="fa-solid fa-plus"></i>
                        Poser votre question
                    </span>
                </a>
            {% else %}
                <a href="{{ path('app_register') }}" class="px-5 py-2 bg-[#F5702B] text-white text-sm font-medium rounded-md hover:bg-orange-700 transition-colors">
                    Connexion
                </a>
            {% endif %}
        </div>

        {# Barre de recherche mobile #}
        <div class="sm:hidden flex-1 mx-3">
            <input 
                type="text" 
                name="recherche" 
                placeholder="Recherchez" 
                class="bg-[#F5702B] w-full px-3 py-1 text-white text-xs rounded-full placeholder-white focus:outline-none"
            >
        </div>

        {# Bouton menu burger mobile #}
        <button id="openMenu" class="p-2 text-gray-800 hover:text-orange-600 transition-colors md:hidden">
            <i class="fa-solid fa-bars text-xl"></i>
        </button>
    </div>
</header>

		{% block body %}{% endblock %}


		{% block js %}

			{# script pour le menu burger #}
			<script>
				document.addEventListener('DOMContentLoaded', function () {
const sidebar = document.querySelector('#sidebar');
const overlay = document.querySelector('#overlay')
const openMenuBtn = document.querySelector('#openMenu')
const closeMenuBtn = document.querySelector('#closeMenu')

console.log(sidebar);
console.log(overlay);
console.log(openMenuBtn);
console.log(closeMenuBtn);


// Fonction pour ouvrir le menu
openMenuBtn.addEventListener('click', function () {
sidebar.classList.remove('w-0');
sidebar.classList.add('w-4/5', 'sm:w-1/2', 'md:w-1/3');
overlay.classList.remove('opacity-0');
overlay.classList.add('opacity-50');
})

// Fonction pour fermer le menu
function closeMenu() {
sidebar.classList.remove('w-4/5', 'sm:w-1/2', 'md:w-1/3')
sidebar.classList.add('w-0')
overlay.classList.remove('opacity-50')
overlay.classList.add('opacity-0')
}

closeMenuBtn.addEventListener('click', closeMenu)
overlay.addEventListener('click', closeMenu)
})
			</script>
			{# fin du script #}
		{% endblock %}
	</body>
</html>
